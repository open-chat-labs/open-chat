type RegisterUserResult =
    variant {
        Success;
        UserExists;
        UsernameExists
    };

type UpdateUsernameResult =
    variant {
        Success;
        SuccessNoChange;
        UsernameTaken;
        UserNotFound
    };

service : {
    register_user: (text) -> (RegisterUserResult);
    update_username: (text) -> (UpdateUsernameResult);
    get_username: () -> (opt text) query;
    get_principal: (text) -> (opt principal) query;
}