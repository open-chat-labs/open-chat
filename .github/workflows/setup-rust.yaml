on:
  workflow_call:
    inputs:
      # Either 'read', 'write' or empty
      cache:
        required: false
        type: string

name: Setup Rust

jobs:
  setup:
    name: Setup Rust
    runs-on: ubuntu-latest
    steps:
      - name: Checkout repo
        uses: actions/checkout@v4
      - name: Install Rust toolchain
        uses: actions-rust-lang/setup-rust-toolchain@v1
        with:
          cache: false
      - name: Setup caching
        if: ${{ inputs.cache == 'read' || inputs.cache == 'write' }}
        uses: Swatinem/rust-cache@v2
        with:
          shared-key: "build-debug"
          save-if: ${{ inputs.cache == 'write' }}
