IDENTITY=${1:-default}

SCRIPT=$(readlink -f "$0")
SCRIPT_DIR=$(dirname "$SCRIPT")
cd $SCRIPT_DIR/..

PRINCIPAL=$(dfx --identity $IDENTITY identity get-principal)

./scripts/download-nns-canister-wasm.sh icrc_ledger ic-icrc1-ledger
dfx --identity $IDENTITY canister create --no-wallet --with-cycles 100000000000000 test_ledger
dfx --identity $IDENTITY canister install test_ledger --wasm ./wasms/icrc_ledger.wasm.gz --argument "(variant { Init = record {
    minting_account = record { owner = principal \"$PRINCIPAL\" };
    transfer_fee = 10000:nat;
    decimals = 8:nat8;
    token_symbol = \"TEST\";
    token_name = \"Test\";
    metadata = vec {
        record {
              \"icrc1:logo\";
              variant {
                Text = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAgAAAAIACAYAAAD0eNT6AAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAjbwAAI28BNfwH+wAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAACAASURBVHic7d15lB5Vgffx7306CQkkJGyigCgCgoAg6U4CiDi4oCgKMsA4OjIKKuMyivq6nlfHZWbcGBHHDXRcwBUQFZ1XGVREWU03qwEXFhEZCGtCQkKW7vv+UR1pQnenn6Xq1vL9nNMnvTxP1Q8O5P763ltVAUllNx3YDnjc6Me80Y+txnw+F9gC2Hz0zxmj35s2+udYs0ePSRz86/fWASs3et0yYBhYTmQtLR4CVhF5aPRny4gso8UyIg8QWUYfdwP3sJy7w6Gs79E/v6QchNQBpIbbDtgJeCKw8+jnOwE7kg32241+5GJMAcjDPTBaCCJ/IXAHkb/Q4jaGuZ0WfwkD3JtrAkkTsgBI+eojG9h3A3Yd589Z6aLlXgCmYjVwE3AzcBNx9PNp3MQz+HMIjKSNJ9WXBUDqnR2AvYC9x/z5DLIp+VIqQQGYzFqycrCEyA0EljDCDfyJ34XjGE4dTqo6C4DUvunAU4H+MR/7k62/V0rJC8BE1gF/JDBEZAgYAq4KA6xKnEuqFAuANLk+st/mFwEHAAuBp5Ftrqu8ihaA8awHbgB+Q+QK4EoGuMElBGliFgDp0bYEDgaeCRwIDABzkibKUY0KwHgeJLKYFlcwwqWs4ZJwMCtSh5LKwgKgpptD9tv988gG/oWMXiLXBDUvABsbBn5P5BICPwMu8ioENZkFQE0zi2ygf/7ox340+P+DhhWAjY0A1xK4kBEuZCWXhEN5OHUoqSiN/YtPjbIf8AKyAf9gYGbaOOXR8AKwsdXAr4ELgQvCANcnziPlygKgOppJNtC/BDiK7Dp8jcMCMKnbiFxAix/zIBc6O6C6sQCoLrYBjgReSraeX9pr78vEAjBlDwH/Q+B81nB+OIj7UweSumUBUJVtC7wIOJZsir8xm/d6xQLQkWHgCuAc4OwwwJ2J80gdsQCoarYHjhv9OAhopY1TbRaArg0TuZQWZxM4O8znntSBpKmyAKgKZgFHAMfjb/o9ZQHoqWxmIHAmq/m29xxQ2VkAVFbTgBcCryLbzJf0oTl1ZQHIzSoC5xP5BrfwU59doDKyAKhs9gD+HngN7t7PnQWgEHcC5xD4r9DPdanDSBtYAFQGc4CXkw36BybO0igWgMJdSuSrbM53w96sTB1GzWYBUEp7Aq8GXg9slTZKM1kAkllB5Nv08fkwn2tTh1EzWQBUtBlk1+u/nux6fSVkASiFIQJnsIazwkGsTh1GzWEBUFF2AN5INvBvlziLRlkASuVu4Azg895bQEWwAChv84GTyC7h8x78JWMBKKW1wA9pcWqYz+Wpw6i+LADKQws4Gngb2c16VFIWgNK7hMCpzOcHITCSOozqxQKgXppBtpv/vWQb/FRyFoDKuAX4DCs43YcSqVcsAOqFOcAJwDuBHRNnURssAJWzlMgXmcanw/4sSx1G1WYBUDe2Jpvm/2dgbuIs6oAFoLKWAZ9hBp8O+/JA6jCqJguAOrEN2aD/VmBe4izqggWg8lYCn2Mtn/ARxWqXBUDt2BZ4M3Ay/sZfCxaA2lgJfIX1/Hs4gKWpw6gaLACaitnAm8g29znw14gFoHayGQH4aBhgeeowKjcLgCYzg+xWvR8Gtk8bRXmwANTWfcAnWcFpXjWgiVgANJ5pZA/m+QCwU+IsypEFoPb+TORD3MrXfSSxNmYB0MaeB3wKeHrqIMqfBaAxfkfk7WEBP0kdROVhAdAGewGfBF6UOoiKYwFonB8DJ4cBbk4dROm1UgdQcjsCXwWux8FfqrsjgCVxiI/HK9gydRilZQForulk1/HfSLbRz/8WpGbYjMi7mMYtcZC3xrPpSx1IabgE0EzPBT5DNu2vBnMJQMDVtDg5zOdXqYOoWP7W1yy7AmcDP8PBX1Jmf0a4OA7yo3glu6QOo+JYAJphOvA+4LfAsYmzSCqnI+hjSVzMu+JFTEsdRvlzCaD+ngF8GehPHUTl4xKAJnAdI7w2LGRx6iDKjzMA9TUL+BgwiIO/pPbsS4vL4iCnxWvZInUY5cMZgHo6BPgS8NTUQVRuzgBoCm4hclJYwM9SB1FvOQNQL/OA04Ff4uAvqTeeQuDCOMjZ8Uq2SR1GvWMBqI+XkG3yez3O7EjqvWNHNwkenzqIesOBovp2BL5IdocvqS0uAahDPwTeEAa4M3UQdc4ZgGp7GXAtDv6SinUkcENczMtTB1HnLADVNAs4DTgPXJOTlMQ8At+OQ5wZlzA7dRi1zwJQPQPANcBbUgeRJCKvYjXXxas4MHUUtccCUB2B7OE9l+IOf0nlsgsj/Cou5oM+XKg63ARYDTsDZwLPTh1E9eImQPVc5HJGeGVYxK2po2hyzgCU3zHA1Tj4S6qCwIH0cXUc4pWpo2hyFoDy2pLst/5zgK0TZ5Gkdswl8o04yFfdIFheLgGU0x5kO/x9ZK9y5RKACvAHRjg6LGRJ6iB6NGcAyuelwJU4+Euqh6fS4vK4mGNSB9GjWQDKo4/s6X0/AOYmziJJvTSHwNlxkNPiRUxLHUYZlwDKYVvgW8DzUwdRs7gEoMIFLmYdfxcOYGnqKE3nDEB684HFOPhLaoLIs5nGYBxkUeooTWcBSOt44BLgyYlzSFKRdgIujkO8LnWQJrMApLEZcAbwdbL7+ktS02xG5Iw4xJnxMv8eTME9AMXbgWyj34LUQST3AKgkrmSEo8JC7kodpEmcASjWPsDlOPhL0liLaDEYf8MzUgdpEgtAcZ5Htt6/c+ogklRCO9LiV3Exh6cO0hQWgGK8Bvh/eH2/JE1mDoHz42JOSh2kCSwA+QrAB4GvANPTRpGkSphG4ItxkNNidJ9anvyXm5/NgP8Cn4il8nIToEruHFZwfDiUh1MHqSNnAPKxNXABDv6S1I1j2ZKfx0G2TR2kjiwAvfcU4FLg2amDSFLlRQ4CLo9Xs3vqKHVjAeithcAVwJ6pg0hSjezGML+OQ/SnDlInFoDe+RvgQmC7xDkkqY62J/LLOMihqYPUhQWgN14C/ATYMnUQSaqx2cCP4yCHpQ5SBxaA7v0DcB4wM3UQSWqAzYEfxSFeljpI1VkAuvM24ExgWuogktQgM4h8Nw7xd6mDVJkFoHPvBD6F91KQpBSmE/lmXMyJqYNUlQWgM+8GPpE6hCQ1XB+BL8UhTk4dpIosAO37IPCx1CEkSQAEIqfGIf4ldZCqsQC05yPgf2SSVDqRD8ZBfzlrhwVg6v4N+L+pQ0iSJvTuOMiHU4eoCgvA1HwEeF/qEJKkTXp/HOQ9qUNUgQVg0z6Av/lLUpV8NA7y9tQhys4CMLl3AB9KHUKS1LZT4hCvSx2izCwAEzsZOCV1CElSRwKRL3izoIlZAMb3KrKb/EiSqquPyFlxiJekDlJGFoDHOhL4Ct7hT5LqYDqRc+NiDk8dpGwsAI/2HOA7eG9/SaqTGQTOjVdxSOogZWIBeMRC4If4VD9JqqPNGeH8OER/6iBlYQHI7AL8iOxZ05KkeppL5KdxiN1SBykDCwBsDfwEeFzqIJKk3G1L5EfxOrZKHSS1pheAGcA5wB6pg0iSCrMna/hB/CObpQ6SUpMLQAC+TLbxT5LUJIFDeJCvxdjcK76aXAD+lex6f0lSE0VezmBzn/Da1AJwAj7cR5IU+EAc5B9Tx0ihiQXgb4AvpA4hSSqFAHwpLuZ5qYMUrWkFYC/g+2Sb/yRJAphO4HtxkKenDlKkJhWAJ5Bd7jcvdRBJUulsCZwff8PjUwcpSlMKwEyyu/ztnDqIJKm0nkyL7zfl8sCmFIDPAgtSh5Akld4BPMhpqUMUoQkF4PXAialDSJIqInJSXFz/caPuN0BYCPwKmjGdI7UrDqZOIJXWw7R4VphPbf8vqfMMwDbAd3HwlyS1byYjfC8Osm3qIHmpawHoA74FPDlxDklSde1M5DvxbPpSB8lDXQvAx4DDUoeQJFVc4LnswodTx8hDHfcAHAWcRz3/2aSecg+ANCWRyHFhAeemDtJLdRsk9wB+Q3ZDB0mbYAGQpmwFLQ4I87khdZBeqdMSwJZkN/tx8Jck9docRjgnLmF26iC9UqcC8FmyGQBJkvKwF6v5dOoQvVKXAnAM8KrUISRJtXdiHOLvUofohTrsAdgJuBbYOnUQqWrcAyB1ZBmwXxjgz6mDdKPqMwAt4Ewc/CVJxZlH5Kyq3x+g6gXgvcChqUNIkhomcAi78I7UMbpR5SWAfuAyYEbqIFJVuQQgdWUdkYPDAn6TOkgnqjoDsAXwTRz8JUnpTCfwzapeGljVAnAaXvInSUpvN1bzydQhOlHFAvAyqP9zmiVJlfFPcTFHpg7RrqrtAdiR7JK/bVIHkerAPQBSz9wL7BsGuDN1kKmq2gzA53DwlySVz7bAl1KHaEeVCsDLoXpTLJKkxnhxHOQVqUNMVVWWALYGbgC2Tx1EqhOXAKSeu4/17B0OYGnqIJtSlRmAT+HgL0kqv22YxumpQ0xFFQrAocDxqUNIkjRFR8bFHJM6xKaUfQlgc+A6YNfUQaQ6cglAys1SZvC0sC8PpA4ykbLPAHwEB39JUvVsz1r+PXWIyZR5BmABcDlU+2lLUpk5AyDlaoQRnhUWclnqIOMp6wzANOB0HPwlSdXVosXpcZDpqYOMp6wF4F3A/qlDSJLUpX2At6cOMZ4yLgHsCvwWmJk6iFR3LgFIhVhFi73CfG5LHWSsMs4AnIqDvySpPjZnhFNSh9hY2QrAYcBLUoeQJKnHjolDvCB1iLHKVABmAJ9JHUKSpFxETi3ThsAyFYB3AHukDiFJUk6eBvxz6hAblGUT4I7A74DZqYNITeImQKlwD7Kep5bhYUFlmQH4Nxz8JUn1tyV9fDh1CCjHDMB+wFWUp4xIjeEMgJTEMLB/GOD6lCHKMOieQjlySJJUhD7g06lDpB54jwCelziDJElFe07qywJTFoBpwCcSnl+SpHQip8Sz0z3zJmUBOIHskghJkppoH3blValOnmoT4EzgD8ATE51fEm4ClErgNuayR9idNUWfONUMwJtx8Jck6Uks56QUJ04xAzAHuAl4XIJzSxrDGQCpFO7hYXYNB7OiyJOmmAF4Fw7+kiRtsB0zeWvRJy16BmBb4BayWQBJiTkDIJXGcmawS9iXB4o6YdEzAP8HB39JkjY2l7WcXOQJi5wB2Aa4FQuAVBrOAEil8iAzeHJRswBFzgC8Awd/SZImsiVritsLUNQMwNbAn7AASKXiDIBUOoXtBShqBuDtOPhLkrQpc1nHW4o4UREzAFsCtwHzCjiXpDY4AyCV0gPMYuewNyvzPEkRMwBvxMFfkqSp2orVvCbvk+Q9A7AZ2c7/J+R8HkkdcAZAKq1bWcFTw6Gsz+sEec8AvBoHf0mS2rULc3hZnifIswD0kV36J0mS2hV4Z56Hz7MAvAzYPcfjS5JUX5EFcZCD8zp8ngXg7TkeW5KkJshtJj2vAtAPHJjTsSVJaooj4xBPy+PAeRUAf/uXJKl7gZjPjYHyuAxwB7JL/2bkcGxJPeRlgFIlPMx6nhwOYGkvD5rHDMCbcPCXJKlXZjKdf+r1QXs9A7AZcDuwXY+PKykHzgBIlXE3c9k57M6aXh2w1zMAx+LgL0lSrz2OZRzdywP2ugC8ocfHkyRJmZ4uA/SyAOwLHNTD40mSpA0Ch8TF7NOrw/WyAPjbvyRJeQq8rneH6o3ZwB3Alj06nqQCuAlQqpzlTGfHsB8PdXugXs0A/D0O/pIk5W0u6zm2FwfqVQE4oUfHkSRJkxnhNb04TC8KwB7Aoh4cR5IkbUrgWXGI3bo9TC8KwInkc0thSZL0WAF4dbcH6bYATAP+odsQkiSpDZFXx7Pp6+YQ3RaAw4EndHkMSZLUnh3Zled1c4BuC8Cruny/JEnqROxuDO5m7X4OsBSY1U0ASel4HwCp0h5iFo8Pe7Oykzd3MwNwNA7+kiSlsgWreEmnb+6mALyii/dKkqTu/X2nb+x0CeBxZLf+ndbpiSWl5xKAVHnrGOYJYRH3tfvGTmcAXo6DvyRJqU2nr7NbA3daAI7r8H2SJKm3OioAnSwBPJ5s+r+XjxKWlIBLAFItDDOdHcJ+3N3OmzoZxI/u8H2SJKn3+ljHS9t9UycD+d928B5JkpSX2P7Y3O4SwDbAXbgBUKoFlwCk2ljHDLYP+/LAVN/Q7gzAS3HwlySpbKazhiPaeUO7BeCoNl8vSZKKENrbB9DOEsBmwL3A7LYCSSotlwCkWlnJXLYNu7NmKi9uZwbguTj4S5JUVrNZxrOm+uJ2CkBbawuSJKlwL57qC9spAC/qIIgkSSpKG/sAploA9gWe1FkaSZJUkKfEQfacygunWgBe2EUYSZJUlDC1MXuqBeD5XUSRJElFiVMbs6dSAGYCz+wujSRJKsiz4x/ZbFMvmkoBOASY1X0eSZJUgC1YxoGbetFUCoDT/5IkVcsmx24LgCRJddPqvgBsDTy9N2kkSVIhIv3xauZN9pJNFYBDpvAaSZJULi2GJ9/AP5UCIEmSqiZMPoZvqgA8u4dRJElSUeLkY/hkBWBLYL/eppEkSQXpj5cwZ6IfTlYADgb6ep9HkiQVYBqbccBEP9xUAZAkSVUVeNZEP5qsAEzYGiRJUiUsmugHExWAFtCfTxZJklSQRTGOP9ZPVAD2IdsEKEmSqmsuV7PneD+YqABMOGUgSZIqZHj8JX0LgCRJ9TbumD5RAViYYxBJklSUMPUCMBN4Wr5pJElSQfaKFzFz42+OVwD2Babln0eSJBVgOnPYa+NvjlcA9i8gjCRJKkp87NhuAZAkqf6mVADmFxBEkiQVpbXpAtBHdhMgSZJUF5F9N74j4MYFYFdgVnGJJElSAWbzG5409hsbF4C9CwwjSZKKMu3RY/zGBeAxlwlIkqQaGHn0GG8BkCSpCYIFQJKk5pmkALSAPYpNI0mSChF5WoyEDV+OLQBPwisAJEmqq9lcyY4bvhhbAHZLEEaSJBWl75Gx3gIgSVJThPELwK4JokiSpOL8dax3BkCSpOZwCUCSpAZ6TAEIwC5pskiSpII8ZglgW2DzNFkkSVJB5sTr2AoeKQBPTBhGkiQVZV025lsAJElqkmgBkCSpiXYGC4AkSU3zqBmAnRIGkSRJRdloCWCHhFEkSVJxngCPFIDtEwaRJElFCdmYbwGQJKlZHgfZHQCnA2tGP5fUIHEwdQJJCYywgs1aZE3AwV+SpGZoMYttNhQASZLUFNPZvgVslzqHJEkqUGC7FmQPBZAkSQ0xzLwWMC91DkmSVKDAVs4ASJLUPPNawNzUKSRJUqHmugQgSVLTxGwJwBkASZKaJGRLALNT55AkSYXaogVsnjqFJEkq1OYtYFbqFJIkqVCznAGQJKl5NrcASJLUPC4BSJLUQLNawMzUKSRJUqFmtYBpqVNIkqRCTbMASJLUPH0toC91CkmSVKhpFgBJkprHGQBJkhrIGQBJkhqob1ocTJ1BUiphIHUCSam0gOHUISRJUqGGLQCSJDXPeguAJEnN4wyAJEkNtL4FrE+dQpIkFWrYAiBJUvOsbwEPp04hSZIKtboFrE6dQpIkFWp1C1iVOoUkSSrUqhbBAiBJUsOsajHiEoAkSQ3jEoAkSQ20qkVgZeoUkiSpUA+1gGWpU0iSpELdbwGQJKl5lrWIFgBJkhpmeYuWBUCSpIZ5wCUASZKaZ1mLER5InUKSJBVqeYvIPalTSJKkQi1t0WJp6hSSJKlQd7dYwT3ASOokkiSpEMPAfa1wKOuB+1OnkSRJhbgXGG6NfnF3yiSSJKkwSwFaY7+QJEm1dzc8UgDuTBhEkiQV5054pADcnjCIJEkqzp9hQwEIFgBJkhridthQAEYsAJIkNcSYAuASgCRJTTFmCWAk+0KSJNXeIzMAYRH3AauSxpEkSXl7EFgOjywBANySJoskSSrIzRs+GVsAbkoQRJIkFeevY70FQJKk5hi3ANw8zgslSVJ9jLMEEC0AkiTV3DgFYMQlAEmSam6cJYCF3AasTpFGkiTlbiVwx4Yv/loAQmAE+F2KRJIkKXc3AHHDF61xfihJkurnUWP8owtAsABIklRTkxSAaAGQJKmmJikAwxYASZJqapICcBs340OBJEmqm5XAbWO/8agCEI5jGLi+yESSJCl31wAjY7+x8VUAAFcXk0WSJBXkMWP7YwtAsABIklQz12z8jfEKwFWFRJEkSUWZwgzAHK4H1hWRRpIk5W4t49zo7zEFIOzOGuDGIhJJkqTc3QCs2fib420CBLgy3yySJKkgV4z3zfELQLQASJJUE+OO6c4ASJJUb23MAAxwA7A8zzSSJCl3y4A/jPeDcQtACIwQGcw1kiRJytsVbHQHwA0mWgKA1vhTBpIkqTImXNKfuACMcGkuUSRJUlEumegHExeANVwCrM8jjSRJyt064PKJfjhhAQgHs4L42HsHS5KkShgEHprohxPPAAAEftXrNJIkqRCTjuGTF4BoAZAkqaK6KADr+DUTXD4gSZJKaxi4bLIXTFoAwkHcD1zby0SSJCl3Q2Q3AZrQ5DMAAIELe5VGkiQVYpNj96YLwIgFQJKkiulBAVjJJcDqXqSRJEm5e4gJHgA01iYLQDiUh5nkTkKSJKlULgLWbOpFm54BAPcBSJJUHVMas6dWAEb4SVdRJElSUS6YyoumVADCAn4L3NpVHEmSlLebgd9P5YVTmwEACPx3p2kkSVIhfjjVF069AGABkCSp5KY8Vk+9AGzJRcCKTtJIkqTcPUgbV+1NuQCE3VkD/KyTRJIkKXc/BdZO9cXtLAFA4Px200iSpEL8qJ0Xt1cAWvyANtqFJEkqxFra3KvXVgEI+7MMuLid90iSpNxdCDzQzhvamwEAiHyv7fdIkqQ8tT02t18AhvkBMNz2+yRJUh7W0+b6P3RQAMIBLCVyabvvkyRJubgIuLfdN7U/A5A5p8P3SZKk3jq3kzd1VgD6+C7ZlIMkSUpnLR2s/0OHBSDM5x6iNwWSJCmxnwD3dfLGTpcAAL7VxXslSVL3vt3pGzsvADM4D3io4/dLkqRuPAT8uNM3d1wAwn48ROz8xJIkqStd/SLezRIABM7q6v2SJKlTXY3B3RWAW/gp8JeujiFJktr1F+AX3RygqwIQjmMY+GY3x5AkSW37Kl3elbe7GQCAYb4CxK6PI0mSpiICX+/2IF0XgLCIPxC4vNvjSJKkKbkYuLnbg3Q/AwAwwld6chxJkrQpX+3FQXpTADbnu8CDPTmWJEmayDI6vPf/xnpSAMLerAS+0YtjSZKkCX0dWNWLA/VmBiA70udwM6AkSXn6Uq8O1LMCEOZzA3Bpr44nSZIe5ZfAkl4drHczAACBL/b0eJIkaYOejrGhlweLf2QzlnM7sF0vjyspH2EgdQJJU7QU2BlY26sD9nQGIOzOGnrcUCRJEl+gh4M/9HoJINPzkJIkNdga4PReH7TnBSAMcCeRs3t9XEmSGupbwF29PmgeMwAQODWX40qS1DyfyeOguRSAMMBVwCV5HFuSpAb5BXBNHgfOZwYAnAWQJKl7n87rwD29DHCsGGkxxPXAXnmdQ1J3vAxQKrUbgX2AkTwOntsMQAiMEPlUXseXJKnmPkZOgz/kuQQAEDgTuD3Xc0iSVD9/Ab6T5wlyLQBhgHXktHtRkqQaO4Wc76mT2x6ADeIlzGEmtwFb5X0uSe1xD4BUSvcDTwJW5nmSfJcAgHAwK4D/zPs8kiTVxKfJefCHAmYAAOIgc4E/AfOKOJ+kqXEGQCqd5cCTgWV5nyj3GQCAMMBy4LNFnEuSpAr7FAUM/lDQDABAvJp5DHMrzgJIpeEMgFQqhf32DwXNAACE/VlG5PNFnU+SpIo5lYIGfyhwBgAgXsk29HELsGWR55U0PmcApNJ4AHgKBRaAwmYAAMIi7iN4d0BJkjbySQoc/KHgGQCAuITZrOYmYPuizy3p0ZwBkErhbmA3YEWRJy10BgAg7M1KAh8r+rySJJXUhyl48IcEMwAAcQkzWM3vgF1SnF9SxhkAKbk/AXsCa4o+ceEzAABhb9YS+dcU55YkqUT+hQSDPyQqAADcyteB65KdX5KktK4Bvpnq5MkKQDiOYeDkVOeXJCmxk4HhVCdPNwMAhAEuAn6QMoMkSQmcDVycMkDSAgBA5B0kWv+QJCmBh4F3pw6RvACEBdxC4LTUOSRJKsgpZLv/k0pyGeDG4iXMYSa/B56QOovUJF4GKBXuDrLL/lamDpJ8BgAgHMwKIu9PnUOSpJy9hxIM/lCSGQCAGGlxFVcQWZA6i9QUzgBIhboSOBCIqYNASWYAAEJghGFOpiT/YiRJ6qEI/B9KNMaVpgAAhIVcBpyTOockST32DeCS1CHGKlUBAKDFu4DVqWNIktQjK4H3pg6xsdIVgDCf24APpc4hSVKPvJ9s93+plK4AALCC/wCGUseQJKlLi4H/TB1iPKUsAOFQ1tPiRGBd6iySJHVoPXASCe/3P5lSFgCAMJ9rCZyaOockSR36GHB16hATKc19AMYTL2MWM7gO2C11FqmOvA+AlJs/APuR3fe/lEo7AwAQDmI1kddRousmJUnahAi8gRIP/lDyAgAQFvBLAl9NnUOSpCk6HfhF6hCbUuolgA3iIHOBJcCOqbNIdeISgNRzdwJ7ActSB9mU0s8AAIQBlgNvS51DkqRNeBMVGPyhIgUAIAxwDvCD1DkkSZrAucD3U4eYqsoUgFFvBO5NHUKSpI3cDbw5dYh2VKoAhAHuJPLa1DkkSRojAq8FlqYO0o5KFQCAsIAfEjkjdQ5JkkZ9HvhR6hDtqsRVABuLg2xO9qyAPVNnkarMqwCkrt0IDACrUgdpV+VmAADCAKuAVwJrU2eRJDXWGuAVVHDwh4oWAIAwwFXAv6TOIUlqrPcB16QO0alKLgFsECMthrgQeE7qLFIVuQQgdexC4IXASOognarsDABACIwwjeOB+1NnkSQ1xgPAiVR48IeKFwCA8AzuIPC61DkkSY1xEnB76hDdqnwBFlpTDQAAC8BJREFUAAj9nAd8LXUOSVLtnQGckzpEL9SiAAAwi38GbkgdQ5JUW9cDb08doldqUwDC3qxkmJcBy1NnkSTVzjLgaOCh1EF6pTYFACAs4g9Ejie7LaMkSb0QgROAm1IH6aVaFQCAsIDzgY+lziFJqo2PUKGn/E1Vpe8DMJEYaTHIfxN4YeosUpl5HwBpky4EDgeGUwfptdrNAMDo/QHW8Urg1tRZJEmVdRvZrX5rN/hDTQsAQDiI+xnhaGB16iySpMp5GPhb4N7UQfJS2wIAEBZyDZGTUueQJFXOG8meOltbtS4AAGEBZxE4PXUOSVJlfBb4auoQeat9AQBgS94KXJk6hiSp9C4D3pE6RBEaUQDC7qxhhKPINnRIkjSeW8lu9rM2dZAiNKIAAISF3EXgcLKnOEmSNNZy4KXA0tRBitKYAgAQ+rmREV4GrEmdRZJUGuvIdvz/NnWQIjWqAACEhVxM5DV4u2BJUjYWvBb4eeogRWtcAQAIC/g22a0dJUnN9i/AmalDpFDLWwFPRYwEhvgacHzqLFIq3gpYDfdt4JU0dEa4kTMAACGMTvvE5k37SJK4GJq9HNzYAgAQBlhHaN7GD0lquBvADeGNLgAAYYDl9PESGnTphyQ12F3Ai/CScAsAQNifPxF4Mdl1oJKkelpG9mhfbwqHBeCvQj9DtDgcWJk6iySp51aR3ejnmtRBysICMEaYz+W0OIrsMZCSpHpYDRwB/Dp1kDKxAGwkzOfnBI6i4ZtDJKkm1gHHARelDlI2FoBxhH4uIPAKYH3qLJKkjg2T3evlx6mDlJEFYAKhn/PIbg85kjqLJKltEfgn4Dupg5SVBWASYYCvE3hL6hySpLZE4M3Al1MHKTMLwCaEfj5H4G2pc0iSpuy9wOdThyg7C8AUhH4+Dfxr6hySpE36EPDx1CGqwAIwRWGA9wPvSZ1DkjShjwMfTB2iKiwAbQgDfJzIu1PnkCQ9xgfwl7S2WADaFBbwCeANeHWAJJVBBE4GPpI6SNVYADoQBvgigePxPgGSlNIwcCJwWuogVWQB6FDo55sEXkl2lylJUrHWAi8Hvpo6SFVZALoQ+jmb7JnSq1NnkaQGWUN2e99zUwepMgtAl8IA/80IhwMrUmeRpAZ4iOzBPj9MHaTqLAA9EBZyMSM8F7g/dRZJqrFlwGHAz1IHqQMLQI+EhSwmcBiwNHUWSaqhu4DnAJelDlIXFoAeCv0MMcyBwI2ps0hSjSwBDgCuTh2kTiwAPRYWcSszeCY+e1qSeuEXwMHAbamD1I0FIAdhXx5gFi8EzkydRZIq7GvA4WRr/+oxC0BOwt6spZ9XE/kQ2Z2qJElTE8ke6nMC2fX+ykFIHaAJ4iD/CJwBzEidRRorDKROID3GWuC1wFmpg9SdMwAFCAN8neA0liRtwgPAC3DwL4QFoCChn1/Q4pnAn1JnkaQSuhV4JvDLxDkawwJQoDCfGxjhQOCK1FkkqUQuI7vMz0uoC2QBKFhYyF2s4FnAx1NnkaQSOAM4FLg7dZCmcRNgQnGIfyByOrB56ixqJjcBKqGHgTcBX0kdpKmcAUgo9PMNRngm2dqXJDXFn4FDcPBPygKQWFjINQyzALggdRZJKsBPgP2BxamDNJ0FoATCIu6jn8OB9wAjqfNIUg4i2d6nI/DJqaXgHoCSiUMcQeQsYF7qLKo/9wCoIA8Crwa+nziHxnAGoGRCPz+mj4XAb1NnkaQe+B3ZJX4O/iVjASihsD9/ZBYHEtwgI6nSvgQM4PX9peQSQMnFIY4mcgawTeosqh+XAJSTZcAbgO+kDqKJOQNQcqGf8xhhHyI/TZ1Fkqbg58A+OPiXngWgAsJC7mKAFwEnA2tS55Gkcawje4TvYcAdibNoClwCqJi4mH0IfAt4euosqj6XANQjNwKvBK5OHURT5wxAxYQF/Ja1LAI+Q3ZdrSSldBawAAf/ynEGoMLiEC8g8jXg8amzqJqcAVAX7gFOBH6UOog64wxAhYV+LgDmEzg/dRZJjfI9smVIB/8KswBUXBjgztDPkcBxwL2p80iqtbuAY4FjgKWJs6hLFoCaCAOcw3T2JnBW6iySaieSrfXvDZybOIt6xD0ANRQXcwyB/8S9AdoE9wBoCn4PvB74Veog6i1nAGooLOBcYE+yKwWGE8eRVE3ryZ7e9wwc/GvJGYCai4PMB84A+lNnUfk4A6AJXA28DhhKHUT5cQag5sIAVwEHAu8BViWOI6ncHgLeRnZdv4N/zTkD0CDxGnZkmI8SeVXqLCoHZwA0KpJt7nsncFviLCqIBaCB4iCHku0P2Cd1FqVlARAwSPackUtTB1GxXAJooDDARaxgf7L/6ZenziMpif8FTgIW4eDfSM4ANFy8gu3p48METgT6UudRsZwBaKSHgf8APkq25q+GsgAIgDjInsCHye7ypYawADTOj4G3ALemDqL0LAB6lLiY5xE4BdgvdRblzwLQGFeTLfl5Pb/+yj0AepSwgJ9xC/0ETsDdwFLV3Qr8IzCAg7824gyAJhSXMIOHeTWRD+FthWvJGYDauhc4BTiNbM1fegwLgDYpXssWrOPNZDcTmpc6j3rHAlA7K4DPA/8OPJg4i0rOAqApi5cwh5m8EYtAbVgAamPDwP9x4IHEWVQRFgC1bUwReDewVeo86pwFoPIc+NUxC4A6Fq9mHiO8lchbgK1T51H7LACVdR/Z+v5n8GZe6pAFQF2LFzGT2RxH4H3AHqnzaOosAJVzF3A6cCoO/OqSBUA9EyMtruLFwHuIHJQ6jzbNAlAZNwGfBb4IrEmcRTVhAVAu4iAHA+8AXor3mygtC0DpXUT22/6PyZ7YJ/WMBUC5iot5CoG3Aq8FNk+dR49mASiltcAPye7Xf2XiLKoxC4AKEa9iO0Z4A/Am4HGp8yhjASiVpWRT/F8Y/VzKlQVAhYpLmMFqjiTweiLPxf8Gk7IAlMIQcAZwFrA6cRY1iH/5Kpm4mD0IvIZseWCb1HmayAKQzHLgu2Qb+65PnEUNZQFQcvFatmA9xxI5ATgY/7ssjAWgUJHsgTxfAc4FVqWNo6bzL1qVSvwNT6TFK4CTgF1S56k7C0Ah7gC+AXyZ7HI+qRQsACql0XsKPJ/Iq4CjgC1SZ6ojC0BuVgA/IFvX/zkwkjaO9FgWAJVevIiZbPnXMnAkMCN1prqwAPTUMNl1+2cB5wEr08aRJmcBUKXEK9mGFscQOA54NtCXOlOVWQC6th74JXA28D3g/qRppDZYAFRZ8TK2ZjpHEDgWOAxnBtpmAejIMHAFcA7wHbxmXxVlAVAtxKuZx3peQosjiRwGzEmdqQosAFP2IHABcD7wI3wQj2rAAqDaiWfTx1M4EDiC7FkET0scqbQsAJO6BfgZ2X34LyC7Ra9UGxYA1V4cZE8CLyTyfLJ9A15RMMoC8CgrgYuBC4GfAH9IG0fKlwVAjRKXMINVHETgMCLPJ7A/Dd5I2PACMAxcBfwP2aB/Of6WrwaxAKjR4hJms4oDgINp8Uwih9CgzYQNKwDDwDXApcAlZNfnu2tfjWUBkMaIS5jNag4iuyXxotGPuWlT5afmBWAZ2eN0ryAb8C8HHkqaSCoRC4A0iRhpcTV7ElnECAcQWATsBUxPna0XalQA1gFLeGTAvxL4Hdn99yWNwwIgtSkOMp0Rnkqgn0A/0A/sB8xOHK1tFS0AK4HfAzeQPUp3w4eP0pXaYAGQeiRexQ4MsxeBvYmjf8K+lPieBCUvAGuAm8l+s79hzJ834r31pa5ZAKQcxUhgMTvRYjdgV2A3ArsR2XX066TloAQF4EGy6+1vGv24ecznd+AUvpQbC4CUULyOrVjLTgSeROSJRHaixRMZYQcC2wPbjX608jh/jgVgBLhn9GMp8L/A7aMffwFuG/18WW4JJE3KAiCVXDybPp7MdrTYjsB2jLA1gXnAPALzGBn9EzYnMIfITGAW2Q2PZpBdxTC2QGz4+dgCsBp4eMxrRshud7uWbOf8KrIp+RWjny8b8/HAmD83DPp34zS9VGr/H1O85vvjA05oAAAAAElFTkSuQmCC\"
              };
            };
    };
    initial_balances = vec {};
    archive_options = record {
        num_blocks_to_archive = 1000:nat64;
        trigger_threshold = 1000:nat64;
        controller_id = principal \"$PRINCIPAL\";
    };
}})"

LEDGER_CANISTER_ID=$(dfx canister id test_ledger)

dfx --identity $IDENTITY canister call registry add_token "(record {
    ledger_canister_id = principal \"$LEDGER_CANISTER_ID\";
    payer = null;
    token_standard = variant { icrc1 };
    info_url = \"https://dashboard.internetcomputer.org/sns/3e3x2-xyaaa-aaaaq-aaalq-cai\";
    transaction_url_format = \"https://dashboard.internetcomputer.org/sns/3e3x2-xyaaa-aaaaq-aaalq-cai/transactions/{transaction_index}\";
})"
