#!/bin/bash

SCRIPT=$(readlink -f "$0")
SCRIPT_DIR=$(dirname "$SCRIPT")
cd $SCRIPT_DIR

mergedFile=./tsBindingsMerged.d.ts
zodFile=./src/zod.ts

echo "// Autogenerated by \`ts_gen.sh\`. Do not edit manually" > $mergedFile

for filename in $(find ./tsBindings -name '*.ts'); do
    [ -e "$filename" ] || continue

    cat $filename | while read line
    do
        if [[ $line == export* ]]; then
            echo $line >> $mergedFile
        fi
    done
done

npm run typebox
