{"version":3,"file":"main-5fdf605c.js","sources":["../src/registerServiceWorker.ts"],"sourcesContent":["function updateStatus(message: string) {\n    const statusEl = document.getElementById(\"status\");\n    if (statusEl) {\n        statusEl.innerText = message;\n    }\n}\n\nexport function registerServiceWorker(): void {\n    window.addEventListener(\"load\", async () => {\n        // Verify user's web browser has necessary support\n        const unsupported = [\n            [\"serviceWorker\", window.navigator.serviceWorker],\n            [\"BigInt\", window.BigInt],\n            [\"WebAssembly\", window.WebAssembly],\n        ]\n            .filter((tuple) => !tuple[1])\n            .map((tuple) => tuple[0])\n            .join(\", \");\n        if (unsupported) {\n            updateStatus(\n                `This web browser cannot interact with the Internet Computer securely.  (No: ${unsupported})\n       Please try new web browser software.`\n            );\n\n            return;\n        }\n\n        console.log(`Installing the service worker`);\n\n        // Ok, let's install the service worker...\n        // note: if the service worker was already installed, when the browser requested <domain>/, it would have\n        // proxied the response from <domain>/<canister-id>/, so this bootstrap file would have never been\n        // retrieved from the boundary nodes\n        await navigator.serviceWorker.register(\"/sw.js\");\n\n        // delays code execution until serviceworker is ready\n        await navigator.serviceWorker.ready;\n\n        // // reload the page so the service worker can intercept the requests\n        window.location.reload();\n    });\n}\n"],"names":["window","addEventListener","async","unsupported","navigator","serviceWorker","BigInt","WebAssembly","filter","tuple","map","join","message","statusEl","document","getElementById","innerText","updateStatus","console","log","register","ready","location","reload"],"mappings":"AAQIA,OAAOC,iBAAiB,QAAQC,UAE5B,MAAMC,EAAc,CAChB,CAAC,gBAAiBH,OAAOI,UAAUC,eACnC,CAAC,SAAUL,OAAOM,QAClB,CAAC,cAAeN,OAAOO,cAEtBC,QAAQC,IAAWA,EAAM,KACzBC,KAAKD,GAAUA,EAAM,KACrBE,KAAK,MACNR,EAlBZ,SAAsBS,GAClB,MAAMC,EAAWC,SAASC,eAAe,UACrCF,IACAA,EAASG,UAAYJ,EAE7B,CAcYK,CACI,+EAA+Ed,oDAOvFe,QAAQC,IAAI,uCAMNf,UAAUC,cAAce,SAAS,gBAGjChB,UAAUC,cAAcgB,MAG9BrB,OAAOsB,SAASC,SAAQ"}