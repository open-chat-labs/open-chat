#!/bin/bash

EMOJI_DIR="./app/public/assets/emoji"
OUT_DIR="./openchat-shared/src/domain/emoji"

# mkdir -p "$OUT_DIR"

for folder in "$EMOJI_DIR"/*; do
  if [ -d "$folder" ]; then
    folder_name=$(basename "$folder")
    ts_file="$OUT_DIR/$folder_name.ts"

    {
      echo "// Important! Do not edit this file - it is auto-generated by generate_emojis.sh"
      echo "export const files: string[] = ["
    } > "$ts_file"

    # Exclude .DS_Store and any other junk files
    find "$folder" -maxdepth 1 -type f ! -name ".DS_Store" | sort | while read -r file; do
      filename=$(basename "$file")
      echo "  \"$filename\"," >> "$ts_file"
    done

    echo "];" >> "$ts_file"
    echo "Generated $ts_file"
  fi
done
